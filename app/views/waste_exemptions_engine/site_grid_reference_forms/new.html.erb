<%= render("waste_exemptions_engine/shared/back", back_path: back_site_grid_reference_forms_path(@site_grid_reference_form.token)) %>

<div class="text">
  <%= form_for(@site_grid_reference_form) do |f| %>
    <%= render("waste_exemptions_engine/shared/errors", object: @site_grid_reference_form) %>

    <h1 class="heading-large"><%= t(".heading") %></h1>

    <% if @site_grid_reference_form.errors[:grid_reference].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="grid_reference">
        <% if @site_grid_reference_form.errors[:grid_reference].any? %>
        <span class="error-message"><%= @site_grid_reference_form.errors[:grid_reference].join(", ") %></span>
        <% end %>

        <%= f.label :grid_reference, class: "form-label" do %>
          <%= t(".grid_reference_label") %>
          <span class='form-hint'><%= t(".grid_reference_hint") %></span>
        <% end %>
        <%= f.text_field :grid_reference, value: @site_grid_reference_form.grid_reference, class: "form-control" %>
      </fieldset>
    </div>

    <div class="form-group">
      <details>
        <summary>
          <span class="summary"><%= t(".grid_reference_help_link") %></span>
        </summary>
        <div class="panel panel-border-narrow">
          <p><%=
            t(
              ".grid_reference_help_hint",
              link: link_to(
                t(".grid_reference_help_tool_link"),
                "http://gridreferencefinder.com/",
                rel: "external",
                target: "_blank"
                )
            ).html_safe
            %>
          </p>
          <ul class="list list-number">
            <li><%= t(".grid_reference_help_step_1") %></li>
            <li><%= t(".grid_reference_help_step_2") %></li>
            <li><%= t(".grid_reference_help_step_3") %></li>
          </ul>
        </div>
      </details>
    </div>

    <% if @site_grid_reference_form.errors[:description].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="description">
        <% if @site_grid_reference_form.errors[:description].any? %>
        <span class="error-message"><%= @site_grid_reference_form.errors[:description].join(", ") %></span>
        <% end %>

        <%= f.label :description, class: "form-label" do %>
          <%= t(".description_label") %>
          <span class='form-hint'>
            <%= t(".description_hint") %>
            <ul class="list list-bullet">
              <li><%= t(".description_hint_bullet_1") %></li>
              <li><%= t(".description_hint_bullet_2") %></li>
              <li><%= t(".description_hint_bullet_3") %></li>
              <li><%= t(".description_hint_bullet_4") %></li>
            </ul>
          </span>
        <% end %>
        <%= f.text_area :description, value: @site_grid_reference_form.description, class: "form-control", rows: 4 %>
      </fieldset>
      <p><%= t(".description_limit") %></p>
    </div>

    <div class="form-group">
      <%= link_to(t(".use_address_link"), skip_to_address_site_grid_reference_forms_path(@site_grid_reference_form.token)) %>
    </div>

    <%= f.hidden_field :token, value: @site_grid_reference_form.token %>
    <div class="form-group">
      <%= f.submit t(".next_button"), class: "button" %>
    </div>
  <% end %>
</div>
