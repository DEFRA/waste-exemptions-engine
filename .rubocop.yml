inherit_from: .rubocop_todo.yml

inherit_gem:
  defra_ruby_style:
    - default.yml
require:
  - rubocop-factory_bot
  - rubocop-rspec
  - rubocop-rspec_rails

AllCops:
  TargetRubyVersion: 3.2
  Exclude:
    # schema.rb is auto-generated by Rails:
    - spec/dummy/db/schema.rb
    # Avoid pulling in gems for GitHub setup-ruby@v1 action:
    - vendor/bundle/**/*

# Some files need long blocks for clarity
Metrics/BlockLength:
  Exclude:
    - app/models/concerns/waste_exemptions_engine/can_use_back_office_edit_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_front_office_edit_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_new_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_renewing_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_new_charged_registration_workflow.rb
    - config/routes.rb

# Some methods need to be lengthy
Metrics/ClassLength:
  Exclude:
    - app/presenters/waste_exemptions_engine/data_overview_presenter.rb
    - app/presenters/waste_exemptions_engine/registration_details_presenter.rb

# Some modules need to be lengthy, especially specs
Metrics/ModuleLength:
  Exclude:
    - app/models/concerns/waste_exemptions_engine/can_use_back_office_edit_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_new_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_renewing_registration_workflow.rb
    - app/models/concerns/waste_exemptions_engine/can_use_new_charged_registration_workflow.rb
    - spec/**/*

# Notify uses address_line_1 etc naming convention and we want to align with it
Naming/VariableNumber:
  Enabled: false

# Allow "because" as a prefix:
RSpec/ContextWording:
  Prefixes:
    - because
    - when
    - with
    - without
    - if
    - unless
    - for

# Sometimes examples more than 5 lines long are easier to review
RSpec/ExampleLength:
  Max: 15
  Exclude:
    - spec/presenters/waste_exemptions_engine/registration_details_presenter_spec.rb
    - spec/services/waste_exemptions_engine/confirmation_pdf_generator_service_spec.rb
    - spec/services/waste_exemptions_engine/registration_completion_service_spec.rb
    - spec/support/shared_examples/requests/post_form.rb

# Some examples need to have multiple expectations
RSpec/MultipleExpectations:
  Exclude:
    - spec/support/shared_examples/requests/post_form.rb
    - spec/support/shared_examples/requests/unable_to_post_form.rb

# Some complex specs require more memoized helpers than the default of 5
RSpec/MultipleMemoizedHelpers:
  Max: 10

# Nesting can help reduce overall complexity - raise from default of 3
RSpec/NestedGroups:
  Max: 5

# This cop incorrectly flags the sequence of parameters passed to a shared_example:
RSpec/SortMetadata:
  Exclude:
    - "spec/**/*"
